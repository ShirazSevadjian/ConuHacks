{"version":3,"file":"react-modal-sheet.cjs.production.min.js","sources":["../src/constants.ts","../src/utils.ts","../src/hooks.tsx","../src/context.tsx","../src/use-prevent-scroll.ts","../src/styles.ts","../src/sheet.tsx","../src/SheetContainer.tsx","../src/SheetContent.tsx","../src/SheetHeader.tsx","../src/SheetBackdrop.tsx","../src/index.tsx"],"sourcesContent":["export const MAX_HEIGHT = 'calc(100% - env(safe-area-inset-top) - 34px)';\n\nexport const IS_SSR = typeof window === 'undefined';\n\nexport const DEFAULT_SPRING_CONFIG = {\n  stiffness: 300,\n  damping: 30,\n  mass: 0.2,\n};\n\nexport const DRAG_CLOSE_THRESHOLD = 0.6;\n\nexport const DRAG_VELOCITY_THRESHOLD = 500;\n","export function getClosest(nums: number[], goal: number) {\n  return nums.reduce((prev, curr) => {\n    return Math.abs(curr - goal) < Math.abs(prev - goal) ? curr : prev;\n  });\n}\n\nconst highlightId = 'react-modal-sheet-highlight';\n\nexport function applyRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.querySelector(`#${rootId}`) as HTMLDivElement;\n\n  if (root) {\n    const p = 24;\n    const h = window.innerHeight;\n    const s = (h - p) / h;\n    body.style.backgroundColor = '#000';\n    root.style.overflow = 'hidden';\n    root.style.willChange = 'transform';\n    root.style.transition = 'transform 200ms linear';\n    root.style.transform = `translateY(calc(env(safe-area-inset-top) + ${p / 2}px)) scale(${s})`; // prettier-ignore\n    root.style.borderTopRightRadius = '10px';\n    root.style.borderTopLeftRadius = '10px';\n\n    // Add highlighed overlay to emphasize the modality effect\n    const highlight = document.createElement('div');\n    highlight.setAttribute('aria-hidden', 'true');\n    highlight.id = highlightId;\n    highlight.style.position = 'absolute';\n    highlight.style.top = '0px';\n    highlight.style.left = '0px';\n    highlight.style.bottom = '0px';\n    highlight.style.right = '0px';\n    highlight.style.opacity = '0';\n    highlight.style.transition = 'opacity 200ms linear';\n    highlight.style.backgroundColor = 'rgba(150, 150, 150, 0.1)';\n\n    root.appendChild(highlight);\n    requestAnimationFrame(() => (highlight.style.opacity = '1'));\n  }\n}\n\nexport function cleanupRootStyles(rootId: string) {\n  const body = document.querySelector('body') as HTMLBodyElement;\n  const root = document.getElementById(rootId) as HTMLDivElement;\n  const highlight = document.getElementById(highlightId) as HTMLDivElement;\n\n  function onTransitionEnd() {\n    root.style.removeProperty('overflow');\n    root.style.removeProperty('will-change');\n    root.style.removeProperty('transition');\n    body.style.removeProperty('background-color');\n    root.removeEventListener('transitionend', onTransitionEnd);\n    highlight.parentNode?.removeChild(highlight);\n  }\n\n  if (root && highlight) {\n    // Start animating back\n    root.style.removeProperty('border-top-right-radius');\n    root.style.removeProperty('border-top-left-radius');\n    root.style.removeProperty('transform');\n    highlight.style.opacity = '0';\n\n    // Remove temp properties after animation is finished\n    root.addEventListener('transitionend', onTransitionEnd);\n  }\n}\n\nexport function inDescendingOrder(arr: number[]) {\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i + 1] > arr[i]) return false;\n  }\n\n  return true;\n}\n\nexport function validateSnapTo({\n  snapTo,\n  sheetHeight,\n}: {\n  snapTo: number;\n  sheetHeight: number;\n}) {\n  if (snapTo < 0) {\n    console.warn(\n      `Snap point is out of bounds. Sheet height is ${sheetHeight} but snap point is ${sheetHeight +\n        Math.abs(snapTo)}.`\n    );\n  }\n\n  return Math.max(Math.round(snapTo), 0);\n}\n","import * as React from 'react';\n\nimport { IS_SSR } from './constants';\nimport { SheetEvents } from './types';\nimport { applyRootStyles, cleanupRootStyles } from './utils';\n\nexport const useIsomorphicLayoutEffect = IS_SSR\n  ? React.useEffect\n  : React.useLayoutEffect;\n\nexport const useModalEffect = (isOpen: boolean, rootId?: string) => {\n  const prevOpen = usePrevious(isOpen);\n\n  // Automatically apply the iOS modal effect to the body when sheet opens/closes\n  React.useEffect(() => {\n    if (rootId && !prevOpen && isOpen) {\n      applyRootStyles(rootId);\n    } else if (rootId && !isOpen && prevOpen) {\n      cleanupRootStyles(rootId);\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  // Make sure to cleanup modal styles on unmount\n  React.useEffect(() => {\n    return () => {\n      if (rootId && isOpen) cleanupRootStyles(rootId);\n    };\n  }, [isOpen]); // eslint-disable-line\n};\n\nexport const useEventCallbacks = (\n  isOpen: boolean,\n  callbacks: React.MutableRefObject<SheetEvents>\n) => {\n  const prevOpen = usePrevious(isOpen);\n  const didOpen = React.useRef(false);\n\n  // Because of AnimatePrecence we don't have access to latest isOpen value\n  // so we need to read and write to a ref to determine if we are\n  // opening or closing the sheet\n  const handleAnimationComplete = React.useCallback(() => {\n    if (!didOpen.current) {\n      callbacks.current.onOpenEnd?.();\n      didOpen.current = true;\n    } else {\n      callbacks.current.onCloseEnd?.();\n      didOpen.current = false;\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  React.useEffect(() => {\n    if (!prevOpen && isOpen) {\n      callbacks.current.onOpenStart?.();\n    } else if (!isOpen && prevOpen) {\n      callbacks.current.onCloseStart?.();\n    }\n  }, [isOpen, prevOpen]); // eslint-disable-line\n\n  return { handleAnimationComplete };\n};\n\nexport function useWindowHeight() {\n  const [windowHeight, setWindowHeight] = React.useState(0);\n\n  useIsomorphicLayoutEffect(() => {\n    const updateHeight = () => setWindowHeight(window.innerHeight);\n    window.addEventListener('resize', updateHeight);\n    updateHeight();\n    return () => window.removeEventListener('resize', updateHeight);\n  }, []);\n\n  return windowHeight;\n}\n\nexport function usePrevious<T>(state: T): T | undefined {\n  const ref = React.useRef<T>();\n\n  React.useEffect(() => {\n    ref.current = state;\n  });\n\n  return ref.current;\n}\n\n// Userland version of the `useEvent` React hook:\n// RFC: https://github.com/reactjs/rfcs/blob/useevent/text/0000-useevent.md\nexport function useEvent<T extends (...args: any[]) => any>(handler: T) {\n  const handlerRef = React.useRef<T>();\n\n  useIsomorphicLayoutEffect(() => {\n    handlerRef.current = handler;\n  });\n\n  return React.useCallback((...args: any[]) => {\n    const fn = handlerRef.current;\n    return fn?.(...args);\n  }, []) as T;\n}\n","import * as React from 'react';\nimport { SheetContextType } from './types';\n\nexport const SheetContext = React.createContext<SheetContextType | undefined>(\n  undefined\n);\n\nexport const useSheetContext = () => {\n  const context = React.useContext(SheetContext);\n  if (!context) throw Error('Sheet context error');\n  return context;\n};\n","// Source: https://github.com/adobe/react-spectrum/blob/main/packages/@react-aria/overlays/src/usePreventScroll.ts\nimport {\n  chain,\n  getScrollParent,\n  isIOS,\n  useLayoutEffect,\n} from '@react-aria/utils';\n\ninterface PreventScrollOptions {\n  /** Whether the scroll lock is disabled. */\n  isDisabled?: boolean;\n}\n\n// @ts-ignore\nconst visualViewport = typeof window !== 'undefined' && window.visualViewport;\n\n// HTML input types that do not cause the software keyboard to appear.\nconst nonTextInputTypes = new Set([\n  'checkbox',\n  'radio',\n  'range',\n  'color',\n  'file',\n  'image',\n  'button',\n  'submit',\n  'reset',\n]);\n\n// The number of active usePreventScroll calls. Used to determine whether to revert back to the original page style/scroll position\nlet preventScrollCount = 0;\nlet restore: any;\n\n/**\n * Prevents scrolling on the document body on mount, and\n * restores it on unmount. Also ensures that content does not\n * shift due to the scrollbars disappearing.\n */\nexport function usePreventScroll(options: PreventScrollOptions = {}) {\n  let { isDisabled } = options;\n\n  useLayoutEffect(() => {\n    if (isDisabled) {\n      return;\n    }\n\n    preventScrollCount++;\n    if (preventScrollCount === 1) {\n      if (isIOS()) {\n        restore = preventScrollMobileSafari();\n      } else {\n        restore = preventScrollStandard();\n      }\n    }\n\n    return () => {\n      preventScrollCount--;\n      if (preventScrollCount === 0) {\n        restore();\n      }\n    };\n  }, [isDisabled]);\n}\n\n// For most browsers, all we need to do is set `overflow: hidden` on the root element, and\n// add some padding to prevent the page from shifting when the scrollbar is hidden.\nfunction preventScrollStandard() {\n  return chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden')\n  );\n}\n\n// Mobile Safari is a whole different beast. Even with overflow: hidden,\n// it still scrolls the page in many situations:\n//\n// 1. When the bottom toolbar and address bar are collapsed, page scrolling is always allowed.\n// 2. When the keyboard is visible, the viewport does not resize. Instead, the keyboard covers part of\n//    it, so it becomes scrollable.\n// 3. When tapping on an input, the page always scrolls so that the input is centered in the visual viewport.\n//    This may cause even fixed position elements to scroll off the screen.\n// 4. When using the next/previous buttons in the keyboard to navigate between inputs, the whole page always\n//    scrolls, even if the input is inside a nested scrollable element that could be scrolled instead.\n//\n// In order to work around these cases, and prevent scrolling without jankiness, we do a few things:\n//\n// 1. Prevent default on `touchmove` events that are not in a scrollable element. This prevents touch scrolling\n//    on the window.\n// 2. Prevent default on `touchmove` events inside a scrollable element when the scroll position is at the\n//    top or bottom. This avoids the whole page scrolling instead, but does prevent overscrolling.\n// 3. Prevent default on `touchend` events on input elements and handle focusing the element ourselves.\n// 4. When focusing an input, apply a transform to trick Safari into thinking the input is at the top\n//    of the page, which prevents it from scrolling the page. After the input is focused, scroll the element\n//    into view ourselves, without scrolling the whole page.\n// 5. Offset the body by the scroll position using a negative margin and scroll to the top. This should appear the\n//    same visually, but makes the actual scroll position always zero. This is required to make all of the\n//    above work or Safari will still try to scroll the page when focusing an input.\n// 6. As a last resort, handle window scroll events, and scroll back to the top. This can happen when attempting\n//    to navigate to an input with the next/previous buttons that's outside a modal.\nfunction preventScrollMobileSafari() {\n  let scrollable: Element;\n  let lastY = 0;\n  let onTouchStart = (e: TouchEvent) => {\n    // Store the nearest scrollable parent element from the element that the user touched.\n    scrollable = getScrollParent(e.target as Element);\n    if (\n      scrollable === document.documentElement &&\n      scrollable === document.body\n    ) {\n      return;\n    }\n\n    lastY = e.changedTouches[0].pageY;\n  };\n\n  let onTouchMove = (e: TouchEvent) => {\n    // Prevent scrolling the window.\n    if (\n      scrollable === document.documentElement ||\n      scrollable === document.body\n    ) {\n      e.preventDefault();\n      return;\n    }\n\n    // Prevent scrolling up when at the top and scrolling down when at the bottom\n    // of a nested scrollable area, otherwise mobile Safari will start scrolling\n    // the window instead. Unfortunately, this disables bounce scrolling when at\n    // the top but it's the best we can do.\n    let y = e.changedTouches[0].pageY;\n    let scrollTop = scrollable.scrollTop;\n    let bottom = scrollable.scrollHeight - scrollable.clientHeight;\n\n    // Fix for: https://github.com/adobe/react-spectrum/pull/3780/files\n    if (bottom === 0) {\n      return;\n    }\n\n    if ((scrollTop <= 0 && y > lastY) || (scrollTop >= bottom && y < lastY)) {\n      e.preventDefault();\n    }\n\n    lastY = y;\n  };\n\n  let onTouchEnd = (e: TouchEvent) => {\n    let target = e.target as HTMLElement;\n\n    // Apply this change if we're not already focused on the target element\n    if (willOpenKeyboard(target) && target !== document.activeElement) {\n      e.preventDefault();\n\n      // Apply a transform to trick Safari into thinking the input is at the top of the page\n      // so it doesn't try to scroll it into view. When tapping on an input, this needs to\n      // be done before the \"focus\" event, so we have to focus the element ourselves.\n      target.style.transform = 'translateY(-2000px)';\n      target.focus();\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n      });\n    }\n  };\n\n  let onFocus = (e: FocusEvent) => {\n    let target = e.target as HTMLElement;\n    if (willOpenKeyboard(target)) {\n      // Transform also needs to be applied in the focus event in cases where focus moves\n      // other than tapping on an input directly, e.g. the next/previous buttons in the\n      // software keyboard. In these cases, it seems applying the transform in the focus event\n      // is good enough, whereas when tapping an input, it must be done before the focus event. 🤷‍♂️\n      target.style.transform = 'translateY(-2000px)';\n      requestAnimationFrame(() => {\n        target.style.transform = '';\n\n        // This will have prevented the browser from scrolling the focused element into view,\n        // so we need to do this ourselves in a way that doesn't cause the whole page to scroll.\n        if (visualViewport) {\n          if (visualViewport.height < window.innerHeight) {\n            // If the keyboard is already visible, do this after one additional frame\n            // to wait for the transform to be removed.\n            requestAnimationFrame(() => {\n              scrollIntoView(target);\n            });\n          } else {\n            // Otherwise, wait for the visual viewport to resize before scrolling so we can\n            // measure the correct position to scroll to.\n            visualViewport.addEventListener(\n              'resize',\n              () => scrollIntoView(target),\n              { once: true }\n            );\n          }\n        }\n      });\n    }\n  };\n\n  let onWindowScroll = () => {\n    // Last resort. If the window scrolled, scroll it back to the top.\n    // It should always be at the top because the body will have a negative margin (see below).\n    window.scrollTo(0, 0);\n  };\n\n  // Record the original scroll position so we can restore it.\n  // Then apply a negative margin to the body to offset it by the scroll position. This will\n  // enable us to scroll the window to the top, which is required for the rest of this to work.\n  let scrollX = window.pageXOffset;\n  let scrollY = window.pageYOffset;\n\n  let restoreStyles = chain(\n    setStyle(\n      document.documentElement,\n      'paddingRight',\n      `${window.innerWidth - document.documentElement.clientWidth}px`\n    ),\n    setStyle(document.documentElement, 'overflow', 'hidden'),\n    setStyle(document.body, 'marginTop', `-${scrollY}px`)\n  );\n\n  // Scroll to the top. The negative margin on the body will make this appear the same.\n  window.scrollTo(0, 0);\n\n  let removeEvents = chain(\n    addEvent(document, 'touchstart', onTouchStart, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchmove', onTouchMove, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'touchend', onTouchEnd, {\n      passive: false,\n      capture: true,\n    }),\n    addEvent(document, 'focus', onFocus, true),\n    addEvent(window, 'scroll', onWindowScroll)\n  );\n\n  return () => {\n    // Restore styles and scroll the page back to where it was.\n    restoreStyles();\n    removeEvents();\n    window.scrollTo(scrollX, scrollY);\n  };\n}\n\n// Sets a CSS property on an element, and returns a function to revert it to the previous value.\nfunction setStyle(element: any, style: string, value: string) {\n  let cur = element.style[style];\n  element.style[style] = value;\n\n  return () => {\n    element.style[style] = cur;\n  };\n}\n\n// Adds an event listener to an element, and returns a function to remove it.\nfunction addEvent<K extends keyof GlobalEventHandlersEventMap>(\n  target: EventTarget,\n  event: K,\n  handler: (this: Document, ev: GlobalEventHandlersEventMap[K]) => any,\n  options?: boolean | AddEventListenerOptions\n) {\n  target.addEventListener(event, handler as any, options);\n  return () => {\n    target.removeEventListener(event, handler as any, options);\n  };\n}\n\nfunction scrollIntoView(target: Element) {\n  let root = document.scrollingElement || document.documentElement;\n  while (target && target !== root) {\n    // Find the parent scrollable element and adjust the scroll position if the target is not already in view.\n    let scrollable = getScrollParent(target);\n    if (\n      scrollable !== document.documentElement &&\n      scrollable !== document.body &&\n      scrollable !== target\n    ) {\n      let scrollableTop = scrollable.getBoundingClientRect().top;\n      let targetTop = target.getBoundingClientRect().top;\n      if (targetTop > scrollableTop + target.clientHeight) {\n        scrollable.scrollTop += targetTop - scrollableTop;\n      }\n    }\n\n    target = scrollable.parentElement as any;\n  }\n}\n\nfunction willOpenKeyboard(target: Element) {\n  return (\n    (target instanceof HTMLInputElement &&\n      !nonTextInputTypes.has(target.type)) ||\n    target instanceof HTMLTextAreaElement ||\n    (target instanceof HTMLElement && target.isContentEditable)\n  );\n}\n","import * as CSS from 'csstype';\n\nconst styles: { [key: string]: CSS.Properties } = {\n  wrapper: {\n    position: 'fixed',\n    top: 0,\n    bottom: 0,\n    left: 0,\n    right: 0,\n    zIndex: 9999999,\n    overflow: 'hidden',\n    pointerEvents: 'none',\n  },\n  backdrop: {\n    zIndex: 1,\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    backgroundColor: 'rgba(51, 51, 51, 0.5)',\n    touchAction: 'none', // Disable iOS body scrolling\n    border: 'none',\n  },\n  container: {\n    zIndex: 2,\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    width: '100%',\n    backgroundColor: '#fff',\n    borderTopRightRadius: '8px',\n    borderTopLeftRadius: '8px',\n    boxShadow: '0px -2px 16px rgba(0, 0, 0, 0.3)',\n    display: 'flex',\n    flexDirection: 'column',\n    pointerEvents: 'auto',\n  },\n  headerWrapper: {\n    width: '100%',\n  },\n  header: {\n    height: '40px',\n    width: '100%',\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  indicator: {\n    width: '18px',\n    height: '4px',\n    borderRadius: '99px',\n    backgroundColor: '#ddd',\n  },\n  content: {\n    flex: 1,\n    overflow: 'auto',\n    position: 'relative',\n  },\n};\n\nexport default styles;\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nimport {\n  animate,\n  AnimatePresence,\n  AnimationOptions,\n  PanInfo,\n  useMotionValue,\n  useReducedMotion,\n} from 'framer-motion';\n\nimport {\n  useModalEffect,\n  useWindowHeight,\n  useIsomorphicLayoutEffect,\n  useEvent,\n} from './hooks';\n\nimport {\n  DEFAULT_SPRING_CONFIG,\n  DRAG_CLOSE_THRESHOLD,\n  DRAG_VELOCITY_THRESHOLD,\n  IS_SSR,\n} from './constants';\n\nimport { SheetContextType, SheetProps } from './types';\nimport { SheetContext } from './context';\nimport { getClosest, inDescendingOrder, validateSnapTo } from './utils';\nimport { usePreventScroll } from './use-prevent-scroll';\nimport styles from './styles';\n\nconst Sheet = React.forwardRef<any, SheetProps>(\n  (\n    {\n      onOpenStart,\n      onOpenEnd,\n      onClose,\n      onCloseStart,\n      onCloseEnd,\n      onSnap,\n      children,\n      isOpen,\n      snapPoints,\n      rootId,\n      mountPoint,\n      style,\n      detent = 'full-height',\n      initialSnap = 0,\n      springConfig = DEFAULT_SPRING_CONFIG,\n      disableDrag = false,\n      prefersReducedMotion = false,\n      ...rest\n    },\n    ref\n  ) => {\n    const sheetRef = React.useRef<any>(null);\n    const indicatorRotation = useMotionValue(0);\n    const windowHeight = useWindowHeight();\n    const shouldReduceMotion = useReducedMotion();\n    const reduceMotion = Boolean(prefersReducedMotion || shouldReduceMotion);\n    const animationOptions: AnimationOptions<number> = reduceMotion\n      ? { type: 'tween', duration: 0.01 }\n      : { type: 'spring', ...springConfig };\n\n    // NOTE: the inital value for `y` doesn't matter since it is overwritten by\n    // the value driven by the `AnimatePresence` component when the sheet is opened\n    // and after that it is driven by the gestures and/or snapping\n    const y = useMotionValue(0);\n\n    // Keep the callback fns up-to-date so that they can be accessed inside\n    // the effect without including them to the dependencies array\n    const callbacks = React.useRef({\n      onOpenStart,\n      onOpenEnd,\n      onCloseStart,\n      onCloseEnd,\n    });\n\n    useIsomorphicLayoutEffect(() => {\n      callbacks.current = {\n        onOpenStart,\n        onOpenEnd,\n        onCloseStart,\n        onCloseEnd,\n      };\n    });\n\n    if (snapPoints) {\n      // Convert negative / percentage snap points to absolute values\n      snapPoints = snapPoints.map(point => {\n        // Percentage values e.g. between 0.0 and 1.0\n        if (point > 0 && point <= 1) return Math.round(point * windowHeight);\n        return point < 0 ? windowHeight + point : point; // negative values\n      });\n\n      console.assert(\n        inDescendingOrder(snapPoints) || windowHeight === 0,\n        `Snap points need to be in descending order got: [${snapPoints}]`\n      );\n    }\n\n    const onDrag = useEvent((_, { delta }: PanInfo) => {\n      // Update drag indicator rotation based on drag velocity\n      const velocity = y.getVelocity();\n\n      if (velocity > 0) indicatorRotation.set(10);\n      if (velocity < 0) indicatorRotation.set(-10);\n\n      // Make sure user cannot drag beyond the top of the sheet\n      y.set(Math.max(y.get() + delta.y, 0));\n    });\n\n    const onDragEnd = useEvent((_, { velocity }: PanInfo) => {\n      if (velocity.y > DRAG_VELOCITY_THRESHOLD) {\n        // User flicked the sheet down\n        onClose();\n      } else {\n        const sheetEl = sheetRef.current as HTMLDivElement;\n        const sheetHeight = sheetEl.getBoundingClientRect().height;\n        const currentY = y.get();\n\n        let snapTo = 0;\n\n        if (snapPoints) {\n          const snapToValues = snapPoints\n            .map(p => sheetHeight - p)\n            .filter(p => p >= 0); // negative values can occur with `content-height` detent\n\n          // Allow snapping to the top of the sheet if detent is set to `content-height`\n          if (detent === 'content-height' && !snapToValues.includes(0)) {\n            snapToValues.unshift(0);\n          }\n\n          // Get the closest snap point\n          snapTo = getClosest(snapToValues, currentY);\n        } else if (currentY / sheetHeight > DRAG_CLOSE_THRESHOLD) {\n          // Close if dragged over enough far\n          snapTo = sheetHeight;\n        }\n\n        snapTo = validateSnapTo({ snapTo, sheetHeight });\n\n        // Update the spring value so that the sheet is animated to the snap point\n        animate(y, snapTo, animationOptions);\n\n        if (snapPoints && onSnap) {\n          const snapValue = Math.abs(Math.round(snapPoints[0] - snapTo));\n          const snapIndex = snapPoints.indexOf(getClosest(snapPoints, snapValue)); // prettier-ignore\n          onSnap(snapIndex);\n        }\n\n        if (snapTo >= sheetHeight) onClose();\n      }\n\n      // Reset indicator rotation after dragging\n      indicatorRotation.set(0);\n    });\n\n    // Trigger onSnap callback when sheet is opened or closed\n    React.useEffect(() => {\n      if (!snapPoints || !onSnap) return;\n      const snapIndex = isOpen ? initialSnap : snapPoints.length - 1;\n      onSnap(snapIndex);\n    }, [isOpen]); // eslint-disable-line\n\n    React.useImperativeHandle(ref, () => ({\n      y,\n      snapTo: (snapIndex: number) => {\n        const sheetEl = sheetRef.current as HTMLDivElement | null;\n\n        if (\n          snapPoints &&\n          snapPoints[snapIndex] !== undefined &&\n          sheetEl !== null\n        ) {\n          const sheetHeight = sheetEl.getBoundingClientRect().height;\n          const snapPoint = snapPoints[snapIndex];\n          const snapTo = validateSnapTo({\n            snapTo: sheetHeight - snapPoint,\n            sheetHeight,\n          });\n\n          animate(y, snapTo, animationOptions);\n          if (onSnap) onSnap(snapIndex);\n          if (snapTo >= sheetHeight) onClose();\n        }\n      },\n    }));\n\n    useModalEffect(isOpen, rootId);\n\n    // Framer Motion should handle body scroll locking but it's not working\n    // properly on iOS. Scroll locking from React Aria seems to work much better.\n    usePreventScroll({ isDisabled: !isOpen });\n\n    const dragProps = React.useMemo(() => {\n      const dragProps: SheetContextType['dragProps'] = {\n        drag: 'y',\n        dragElastic: 0,\n        dragConstraints: { top: 0, bottom: 0 },\n        dragMomentum: false,\n        dragPropagation: false,\n        onDrag,\n        onDragEnd,\n      };\n\n      return disableDrag ? undefined : dragProps;\n    }, [disableDrag]); // eslint-disable-line\n\n    const context: SheetContextType = {\n      y,\n      sheetRef,\n      isOpen,\n      initialSnap,\n      snapPoints,\n      detent,\n      indicatorRotation,\n      callbacks,\n      dragProps,\n      windowHeight,\n      animationOptions,\n      reduceMotion,\n    };\n\n    const sheet = (\n      <SheetContext.Provider value={context}>\n        <div {...rest} ref={ref} style={{ ...styles.wrapper, ...style }}>\n          <AnimatePresence>\n            {/* NOTE: AnimatePresence requires us to set keys to children */}\n            {isOpen\n              ? React.Children.map(children, (child: any, i) =>\n                  React.cloneElement(child, { key: `sheet-child-${i}` })\n                )\n              : null}\n          </AnimatePresence>\n        </div>\n      </SheetContext.Provider>\n    );\n\n    if (IS_SSR) return sheet;\n\n    return ReactDOM.createPortal(sheet, mountPoint ?? document.body);\n  }\n);\n\nexport default Sheet;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\nimport { mergeRefs } from 'react-merge-refs';\n\nimport { SheetContainerProps } from './types';\nimport { useSheetContext } from './context';\nimport { useEventCallbacks } from './hooks';\nimport { MAX_HEIGHT } from './constants';\nimport styles from './styles';\n\nconst SheetContainer = React.forwardRef<any, SheetContainerProps>(\n  ({ children, style = {}, className = '', ...rest }, ref) => {\n    const {\n      y,\n      isOpen,\n      callbacks,\n      snapPoints,\n      initialSnap = 0,\n      sheetRef,\n      windowHeight,\n      detent,\n      animationOptions,\n      reduceMotion,\n    } = useSheetContext();\n\n    const { handleAnimationComplete } = useEventCallbacks(isOpen, callbacks);\n    const initialY = snapPoints ? snapPoints[0] - snapPoints[initialSnap] : 0;\n    const maxSnapHeight = snapPoints ? snapPoints[0] : null;\n\n    const height =\n      maxSnapHeight !== null\n        ? `min(${maxSnapHeight}px, ${MAX_HEIGHT})`\n        : MAX_HEIGHT;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={mergeRefs([sheetRef, ref])}\n        className={`react-modal-sheet-container ${className}`}\n        style={{\n          ...styles.container,\n          ...style,\n          ...(detent === 'full-height' && { height }),\n          ...(detent === 'content-height' && { maxHeight: height }),\n          y,\n        }}\n        initial={reduceMotion ? false : { y: windowHeight }}\n        animate={{ y: initialY, transition: animationOptions }}\n        exit={{ y: windowHeight, transition: animationOptions }}\n        onAnimationComplete={handleAnimationComplete}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContainer;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport styles from './styles';\n\nconst SheetContent = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, className = '', ...rest }, ref) => {\n    const { dragProps } = useSheetContext();\n    const _dragProps = disableDrag ? undefined : dragProps;\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-content ${className}`}\n        style={{ ...styles.content, ...style }}\n        {..._dragProps}\n      >\n        {children}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetContent;\n","import * as React from 'react';\nimport { motion, useTransform } from 'framer-motion';\n\nimport { SheetDraggableProps } from './types';\nimport { useSheetContext } from './context';\nimport styles from './styles';\n\nconst SheetHeader = React.forwardRef<any, SheetDraggableProps>(\n  ({ children, style, disableDrag, ...rest }, ref) => {\n    const { indicatorRotation, dragProps } = useSheetContext();\n    const _dragProps = disableDrag ? undefined : dragProps;\n\n    const indicator1Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(2px) rotate(${r}deg)`\n    );\n\n    const indicator2Transform = useTransform(\n      indicatorRotation,\n      r => `translateX(-2px) rotate(${-1 * r}deg)`\n    );\n\n    return (\n      <motion.div\n        {...rest}\n        ref={ref}\n        style={{ ...styles.headerWrapper, ...style }}\n        {..._dragProps}\n      >\n        {children || (\n          <div className=\"react-modal-sheet-header\" style={styles.header}>\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator1Transform }}\n            />\n            <motion.span\n              className=\"react-modal-sheet-drag-indicator\"\n              style={{ ...styles.indicator, transform: indicator2Transform }}\n            />\n          </div>\n        )}\n      </motion.div>\n    );\n  }\n);\n\nexport default SheetHeader;\n","import * as React from 'react';\nimport { motion } from 'framer-motion';\n\nimport { SheetBackdropProps } from './types';\nimport styles from './styles';\n\nconst isClickable = (props: any) => !!props.onClick || !!props.onTap;\n\nconst SheetBackdrop = React.forwardRef<any, SheetBackdropProps>(\n  ({ style = {}, className = '', ...rest }, ref) => {\n    const Comp = isClickable(rest) ? motion.button : motion.div;\n    const pointerEvents = isClickable(rest) ? 'auto' : 'none';\n\n    return (\n      <Comp\n        {...rest}\n        ref={ref}\n        className={`react-modal-sheet-backdrop ${className}`}\n        style={{ ...styles.backdrop, ...style, pointerEvents }}\n        initial={{ opacity: 0 }}\n        animate={{ opacity: 1 }}\n        exit={{ opacity: 0 }}\n      />\n    );\n  }\n);\n\nexport default SheetBackdrop;\n","import { MotionValue } from 'framer-motion';\n\nimport Sheet from './sheet';\nimport SheetContainer from './SheetContainer';\nimport SheetContent from './SheetContent';\nimport SheetHeader from './SheetHeader';\nimport SheetBackdrop from './SheetBackdrop';\nimport { SheetCompound } from './types';\n\nexport type SheetRef = {\n  y: MotionValue<number>;\n  snapTo: (index: number) => void;\n};\n\n// HACK: this is needed to get the typing to work properly...\nconst _SheetCompound: any = Sheet;\n_SheetCompound.Container = SheetContainer;\n_SheetCompound.Header = SheetHeader;\n_SheetCompound.Content = SheetContent;\n_SheetCompound.Backdrop = SheetBackdrop;\n\nexport default _SheetCompound as SheetCompound;\n"],"names":["MAX_HEIGHT","IS_SSR","window","DEFAULT_SPRING_CONFIG","stiffness","damping","mass","getClosest","nums","goal","reduce","prev","curr","Math","abs","cleanupRootStyles","rootId","body","document","querySelector","root","getElementById","highlight","style","removeProperty","opacity","addEventListener","onTransitionEnd","removeEventListener","parentNode","removeChild","validateSnapTo","snapTo","sheetHeight","console","warn","max","round","useIsomorphicLayoutEffect","React","usePrevious","state","ref","current","useEvent","handler","handlerRef","fn","args","restore","SheetContext","undefined","useSheetContext","context","Error","visualViewport","nonTextInputTypes","Set","preventScrollCount","setStyle","element","value","cur","addEvent","target","event","options","scrollIntoView","scrollingElement","documentElement","scrollable","getScrollParent","scrollableTop","getBoundingClientRect","top","targetTop","clientHeight","scrollTop","parentElement","willOpenKeyboard","HTMLInputElement","has","type","HTMLTextAreaElement","HTMLElement","isContentEditable","styles","wrapper","position","bottom","left","right","zIndex","overflow","pointerEvents","backdrop","width","height","backgroundColor","touchAction","border","container","borderTopRightRadius","borderTopLeftRadius","boxShadow","display","flexDirection","headerWrapper","header","alignItems","justifyContent","indicator","borderRadius","content","flex","Sheet","onOpenStart","onOpenEnd","onClose","onCloseStart","onCloseEnd","onSnap","children","isOpen","snapPoints","mountPoint","detent","initialSnap","springConfig","disableDrag","prefersReducedMotion","rest","sheetRef","indicatorRotation","useMotionValue","windowHeight","setWindowHeight","updateHeight","innerHeight","useWindowHeight","shouldReduceMotion","useReducedMotion","reduceMotion","Boolean","animationOptions","duration","y","callbacks","map","point","assert","arr","i","length","inDescendingOrder","onDrag","_","delta","velocity","getVelocity","set","get","onDragEnd","currentY","snapToValues","p","filter","includes","unshift","animate","snapValue","snapIndex","indexOf","sheetEl","prevOpen","h","s","willChange","transition","transform","createElement","setAttribute","id","appendChild","requestAnimationFrame","applyRootStyles","useModalEffect","isDisabled","useLayoutEffect","isIOS","lastY","scrollX","pageXOffset","scrollY","pageYOffset","restoreStyles","chain","innerWidth","clientWidth","scrollTo","removeEvents","e","changedTouches","pageY","passive","capture","scrollHeight","preventDefault","activeElement","focus","once","preventScrollMobileSafari","usePreventScroll","dragProps","drag","dragElastic","dragConstraints","dragMomentum","dragPropagation","sheet","Provider","AnimatePresence","child","key","ReactDOM","SheetContainer","className","handleAnimationComplete","didOpen","useEventCallbacks","initialY","maxSnapHeight","motion","div","mergeRefs","maxHeight","initial","exit","onAnimationComplete","SheetContent","_dragProps","SheetHeader","indicator1Transform","useTransform","r","indicator2Transform","span","isClickable","props","onClick","onTap","SheetBackdrop","Comp","button","_SheetCompound","Container","Header","Content","Backdrop"],"mappings":"6hBAAO,IAAMA,EAAa,+CAEbC,EAA2B,oBAAXC,OAEhBC,EAAwB,CACnCC,UAAW,IACXC,QAAS,GACTC,KAAM,aCPQC,EAAWC,EAAgBC,UAClCD,EAAKE,QAAO,SAACC,EAAMC,UACjBC,KAAKC,IAAIF,EAAOH,GAAQI,KAAKC,IAAIH,EAAOF,GAAQG,EAAOD,cAwClDI,EAAkBC,OAC1BC,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASG,eAAeL,GAC/BM,EAAYJ,SAASG,eAvCT,+BAkDdD,GAAQE,IAEVF,EAAKG,MAAMC,eAAe,2BAC1BJ,EAAKG,MAAMC,eAAe,0BAC1BJ,EAAKG,MAAMC,eAAe,aAC1BF,EAAUC,MAAME,QAAU,IAG1BL,EAAKM,iBAAiB,0BAjBfC,UACPP,EAAKG,MAAMC,eAAe,YAC1BJ,EAAKG,MAAMC,eAAe,eAC1BJ,EAAKG,MAAMC,eAAe,cAC1BP,EAAKM,MAAMC,eAAe,oBAC1BJ,EAAKQ,oBAAoB,gBAAiBD,YAC1CL,EAAUO,eAAYC,YAAYR,gBAuBtBS,SACdC,IAAAA,OACAC,IAAAA,mBAKID,EAAS,GACXE,QAAQC,qDAC0CF,yBAAiCA,EAC/EpB,KAAKC,IAAIkB,SAIRnB,KAAKuB,IAAIvB,KAAKwB,MAAML,GAAS,OCpFzBM,EAA4BrC,EACrCsC,YACAA,2BAkEYC,EAAeC,OACvBC,EAAMH,kBAEZA,aAAgB,WACdG,EAAIC,QAAUF,KAGTC,EAAIC,iBAKGC,EAA4CC,OACpDC,EAAaP,kBAEnBD,GAA0B,WACxBQ,EAAWH,QAAUE,KAGhBN,eAAkB,mBACjBQ,EAAKD,EAAWH,2BADKK,2BAAAA,+BAEpBD,SAAAA,eAAQC,KACd,IC7FE,IC4BHC,ED5BSC,EAAeX,qBAC1BY,GAGWC,EAAkB,eACvBC,EAAUd,aAAiBW,OAC5BG,EAAS,MAAMC,MAAM,8BACnBD,GCIHE,EAAmC,oBAAXrD,QAA0BA,OAAOqD,eAGzDC,EAAoB,IAAIC,IAAI,CAChC,WACA,QACA,QACA,QACA,OACA,QACA,SACA,SACA,UAIEC,EAAqB,EA8NzB,SAASC,EAASC,EAAcrC,EAAesC,OACzCC,EAAMF,EAAQrC,MAAMA,UACxBqC,EAAQrC,MAAMA,GAASsC,EAEhB,WACLD,EAAQrC,MAAMA,GAASuC,GAK3B,SAASC,EACPC,EACAC,EACApB,EACAqB,UAEAF,EAAOtC,iBAAiBuC,EAAOpB,EAAgBqB,GACxC,WACLF,EAAOpC,oBAAoBqC,EAAOpB,EAAgBqB,IAItD,SAASC,EAAeH,WAClB5C,EAAOF,SAASkD,kBAAoBlD,SAASmD,gBAC1CL,GAAUA,IAAW5C,GAAM,KAE5BkD,EAAaC,kBAAgBP,MAE/BM,IAAepD,SAASmD,iBACxBC,IAAepD,SAASD,MACxBqD,IAAeN,EACf,KACIQ,EAAgBF,EAAWG,wBAAwBC,IACnDC,EAAYX,EAAOS,wBAAwBC,IAC3CC,EAAYH,EAAgBR,EAAOY,eACrCN,EAAWO,WAAaF,EAAYH,GAIxCR,EAASM,EAAWQ,eAIxB,SAASC,EAAiBf,UAErBA,aAAkBgB,mBAChBxB,EAAkByB,IAAIjB,EAAOkB,OAChClB,aAAkBmB,qBACjBnB,aAAkBoB,aAAepB,EAAOqB,kBC1S7C,IAAMC,EAA4C,CAChDC,QAAS,CACPC,SAAU,QACVd,IAAK,EACLe,OAAQ,EACRC,KAAM,EACNC,MAAO,EACPC,OAAQ,QACRC,SAAU,SACVC,cAAe,QAEjBC,SAAU,CACRH,OAAQ,EACRJ,SAAU,QACVd,IAAK,EACLgB,KAAM,EACNM,MAAO,OACPC,OAAQ,OACRC,gBAAiB,wBACjBC,YAAa,OACbC,OAAQ,QAEVC,UAAW,CACTT,OAAQ,EACRJ,SAAU,WACVE,KAAM,EACND,OAAQ,EACRO,MAAO,OACPE,gBAAiB,OACjBI,qBAAsB,MACtBC,oBAAqB,MACrBC,UAAW,mCACXC,QAAS,OACTC,cAAe,SACfZ,cAAe,QAEjBa,cAAe,CACbX,MAAO,QAETY,OAAQ,CACNX,OAAQ,OACRD,MAAO,OACPR,SAAU,WACViB,QAAS,OACTI,WAAY,SACZC,eAAgB,UAElBC,UAAW,CACTf,MAAO,OACPC,OAAQ,MACRe,aAAc,OACdd,gBAAiB,QAEnBe,QAAS,CACPC,KAAM,EACNrB,SAAU,OACVL,SAAU,aC1BR2B,EAAQ5E,cACZ,WAqBEG,OAnBE0E,IAAAA,YACAC,IAAAA,UACAC,IAAAA,QACAC,IAAAA,aACAC,IAAAA,WACAC,IAAAA,OACAC,IAAAA,SACAC,IAAAA,OACAC,IAAAA,WACA5G,IAAAA,OACA6G,IAAAA,WACAtG,IAAAA,UACAuG,OAAAA,aAAS,oBACTC,YAAAA,aAAc,QACdC,aAAAA,aAAe7H,QACf8H,YAAAA,oBACAC,qBAAAA,gBACGC,4NAICC,EAAW7F,SAAkB,MAC7B8F,EAAoBC,iBAAe,GACnCC,EJGV,iBAC0ChG,WAAe,GAAhDgG,OAAcC,cAErBlG,GAA0B,eAClBmG,EAAe,kBAAMD,EAAgBtI,OAAOwI,qBAClDxI,OAAOwB,iBAAiB,SAAU+G,GAClCA,IACO,kBAAMvI,OAAO0B,oBAAoB,SAAU6G,MACjD,IAEIF,EIbgBI,GACfC,EAAqBC,qBACrBC,EAAeC,QAAQb,GAAwBU,GAC/CI,EAA6CF,EAC/C,CAAE5D,KAAM,QAAS+D,SAAU,QACzB/D,KAAM,UAAa8C,GAKnBkB,GAAIZ,iBAAe,GAInBa,GAAY5G,SAAa,CAC7B6E,YAAAA,EACAC,UAAAA,EACAE,aAAAA,EACAC,WAAAA,IAGFlF,GAA0B,WACxB6G,GAAUxG,QAAU,CAClByE,YAAAA,EACAC,UAAAA,EACAE,aAAAA,EACAC,WAAAA,MAIAI,IAEFA,EAAaA,EAAWwB,KAAI,SAAAC,UAEtBA,EAAQ,GAAKA,GAAS,EAAUxI,KAAKwB,MAAMgH,EAAQd,GAChDc,EAAQ,EAAId,EAAec,EAAQA,KAG5CnH,QAAQoH,gBL5BoBC,OAC3B,IAAIC,EAAI,EAAGA,EAAID,EAAIE,OAAQD,OAC1BD,EAAIC,EAAI,GAAKD,EAAIC,GAAI,OAAO,SAG3B,EKwBDE,CAAkB9B,IAAgC,IAAjBW,sDACmBX,YAIlD+B,GAAS/G,GAAS,SAACgH,SAAKC,IAAAA,MAEtBC,EAAWZ,GAAEa,cAEfD,EAAW,GAAGzB,EAAkB2B,IAAI,IACpCF,EAAW,GAAGzB,EAAkB2B,KAAK,IAGzCd,GAAEc,IAAInJ,KAAKuB,IAAI8G,GAAEe,MAAQJ,EAAMX,EAAG,OAG9BgB,GAAYtH,GAAS,SAACgH,UAAKE,SAClBZ,ENtGoB,IMwG/B5B,QACK,KAECrF,EADUmG,EAASzF,QACG8B,wBAAwBwB,OAC9CkE,EAAWjB,GAAEe,MAEfjI,EAAS,KAET4F,EAAY,KACRwC,EAAexC,EAClBwB,KAAI,SAAAiB,UAAKpI,EAAcoI,KACvBC,QAAO,SAAAD,UAAKA,GAAK,KAGL,mBAAXvC,GAAgCsC,EAAaG,SAAS,IACxDH,EAAaI,QAAQ,GAIvBxI,EAASzB,EAAW6J,EAAcD,QACzBA,EAAWlI,EN9HM,KMgI1BD,EAASC,MAGXD,EAASD,EAAe,CAAEC,OAAAA,EAAQC,YAAAA,IAGlCwI,UAAQvB,GAAGlH,EAAQgH,GAEfpB,GAAcH,EAAQ,KAClBiD,EAAY7J,KAAKC,IAAID,KAAKwB,MAAMuF,EAAW,GAAK5F,IAChD2I,EAAY/C,EAAWgD,QAAQrK,EAAWqH,EAAY8C,IAC5DjD,EAAOkD,GAGL3I,GAAUC,GAAaqF,IAI7Be,EAAkB2B,IAAI,MAIxBzH,aAAgB,WACTqF,GAAeH,GAEpBA,EADkBE,EAASI,EAAcH,EAAW6B,OAAS,KAE5D,CAAC9B,IAEJpF,sBAA0BG,GAAK,iBAAO,CACpCwG,EAAAA,GACAlH,OAAQ,SAAC2I,OACDE,EAAUzC,EAASzF,WAGvBiF,QAC0BzE,IAA1ByE,EAAW+C,IACC,OAAZE,EACA,KACM5I,EAAc4I,EAAQpG,wBAAwBwB,OAE9CjE,EAASD,EAAe,CAC5BC,OAAQC,EAFQ2F,EAAW+C,GAG3B1I,YAAAA,IAGFwI,UAAQvB,GAAGlH,EAAQgH,GACfvB,GAAQA,EAAOkD,GACf3I,GAAUC,GAAaqF,UJ/KP,SAACK,EAAiB3G,OACxC8J,EAAWtI,EAAYmF,GAG7BpF,aAAgB,WACVvB,IAAW8J,GAAYnD,WDPC3G,OACxBC,EAAOC,SAASC,cAAc,QAC9BC,EAAOF,SAASC,kBAAkBH,MAEpCI,EAAM,KAEF2J,EAAI7K,OAAOwI,YACXsC,GAAKD,EAFD,IAEUA,EACpB9J,EAAKM,MAAM2E,gBAAkB,OAC7B9E,EAAKG,MAAMsE,SAAW,SACtBzE,EAAKG,MAAM0J,WAAa,YACxB7J,EAAKG,MAAM2J,WAAa,yBACxB9J,EAAKG,MAAM4J,qEAA6EH,MACxF5J,EAAKG,MAAM+E,qBAAuB,OAClClF,EAAKG,MAAMgF,oBAAsB,WAG3BjF,EAAYJ,SAASkK,cAAc,OACzC9J,EAAU+J,aAAa,cAAe,QACtC/J,EAAUgK,GArBM,8BAsBhBhK,EAAUC,MAAMiE,SAAW,WAC3BlE,EAAUC,MAAMmD,IAAM,MACtBpD,EAAUC,MAAMmE,KAAO,MACvBpE,EAAUC,MAAMkE,OAAS,MACzBnE,EAAUC,MAAMoE,MAAQ,MACxBrE,EAAUC,MAAME,QAAU,IAC1BH,EAAUC,MAAM2J,WAAa,uBAC7B5J,EAAUC,MAAM2E,gBAAkB,2BAElC9E,EAAKmK,YAAYjK,GACjBkK,uBAAsB,kBAAOlK,EAAUC,MAAME,QAAU,QCtBrDgK,CAAgBzK,GACPA,IAAW2G,GAAUmD,GAC9B/J,EAAkBC,KAEnB,CAAC2G,EAAQmD,IAGZvI,aAAgB,kBACP,WACDvB,GAAU2G,GAAQ5G,EAAkBC,MAEzC,CAAC2G,IImKF+D,CAAe/D,EAAQ3G,YFxJMkD,YAAAA,IAAAA,EAAgC,QACzDyH,EAAezH,EAAfyH,WAENC,mBAAgB,eACVD,SAKuB,KAD3BjI,IAGIT,EADE4I,UAuDV,eACMvH,EACAwH,EAAQ,EAyGRC,EAAU7L,OAAO8L,YACjBC,EAAU/L,OAAOgM,YAEjBC,EAAgBC,QAClBzI,EACEzC,SAASmD,gBACT,eACGnE,OAAOmM,WAAanL,SAASmD,gBAAgBiI,kBAElD3I,EAASzC,SAASmD,gBAAiB,WAAY,UAC/CV,EAASzC,SAASD,KAAM,gBAAiBgL,SAI3C/L,OAAOqM,SAAS,EAAG,OAEfC,EAAeJ,QACjBrI,EAAS7C,SAAU,cAzHF,SAACuL,IAElBnI,EAAaC,kBAAgBkI,EAAEzI,WAEd9C,SAASmD,iBACxBC,IAAepD,SAASD,OAK1B6K,EAAQW,EAAEC,eAAe,GAAGC,SA+GmB,CAC7CC,SAAS,EACTC,SAAS,IAEX9I,EAAS7C,SAAU,aAhHH,SAACuL,MAGfnI,IAAepD,SAASmD,iBACxBC,IAAepD,SAASD,UAUtBiI,EAAIuD,EAAEC,eAAe,GAAGC,MACxB9H,EAAYP,EAAWO,UACvBY,EAASnB,EAAWwI,aAAexI,EAAWM,aAGnC,IAAXa,KAICZ,GAAa,GAAKqE,EAAI4C,GAAWjH,GAAaY,GAAUyD,EAAI4C,IAC/DW,EAAEM,iBAGJjB,EAAQ5C,QArBNuD,EAAEM,mBA0GyC,CAC3CH,SAAS,EACTC,SAAS,IAEX9I,EAAS7C,SAAU,YAtFJ,SAACuL,OACZzI,EAASyI,EAAEzI,OAGXe,EAAiBf,IAAWA,IAAW9C,SAAS8L,gBAClDP,EAAEM,iBAKF/I,EAAOzC,MAAM4J,UAAY,sBACzBnH,EAAOiJ,QACPzB,uBAAsB,WACpBxH,EAAOzC,MAAM4J,UAAY,SAyEc,CACzCyB,SAAS,EACTC,SAAS,IAEX9I,EAAS7C,SAAU,SAxEP,SAACuL,OACTzI,EAASyI,EAAEzI,OACXe,EAAiBf,KAKnBA,EAAOzC,MAAM4J,UAAY,sBACzBK,uBAAsB,WACpBxH,EAAOzC,MAAM4J,UAAY,GAIrB5H,IACEA,EAAe0C,OAAS/F,OAAOwI,YAGjC8C,uBAAsB,WACpBrH,EAAeH,MAKjBT,EAAe7B,iBACb,UACA,kBAAMyC,EAAeH,KACrB,CAAEkJ,MAAM,YA8CmB,GACrCnJ,EAAS7D,OAAQ,UAvCE,WAGnBA,OAAOqM,SAAS,EAAG,cAuCd,WAELJ,IACAK,IACAtM,OAAOqM,SAASR,EAASE,IAtMXkB,GAkBTf,QACLzI,EACEzC,SAASmD,gBACT,eACGnE,OAAOmM,WAAanL,SAASmD,gBAAgBiI,kBAElD3I,EAASzC,SAASmD,gBAAiB,WAAY,YAlBxC,WAEsB,KAD3BX,GAEET,OAGH,CAAC0I,IEqIFyB,CAAiB,CAAEzB,YAAahE,QAE1B0F,GAAY9K,WAAc,kBAWvB0F,OAAc9E,EAV4B,CAC/CmK,KAAM,IACNC,YAAa,EACbC,gBAAiB,CAAE9I,IAAK,EAAGe,OAAQ,GACnCgI,cAAc,EACdC,iBAAiB,EACjB/D,OAAAA,GACAO,UAAAA,MAID,CAACjC,IAiBE0F,GACJpL,gBAACW,EAAa0K,UAAS/J,MAhBS,CAChCqF,EAAAA,GACAd,SAAAA,EACAT,OAAAA,EACAI,YAAAA,EACAH,WAAAA,EACAE,OAAAA,EACAO,kBAAAA,EACAc,UAAAA,GACAkE,UAAAA,GACA9E,aAAAA,EACAS,iBAAAA,EACAF,aAAAA,IAKEvG,uCAAS4F,GAAMzF,IAAKA,EAAKnB,WAAY+D,EAAOC,QAAYhE,KACtDgB,gBAACsL,uBAEElG,EACGpF,WAAe6G,IAAI1B,GAAU,SAACoG,EAAYtE,UACxCjH,eAAmBuL,EAAO,CAAEC,mBAAoBvE,OAElD,eAMRvJ,EAAe0N,GAEZK,eAAsBL,SAAO9F,EAAAA,EAAc3G,SAASD,SCxOzDgN,EAAiB1L,cACrB,WAAoDG,OAAjDgF,IAAAA,aAAUnG,MAAAA,aAAQ,SAAI2M,UAAAA,aAAY,KAAO/F,0CAYtC/E,IAVF8F,IAAAA,EAGAtB,IAAAA,eACAG,YAAAA,aAAc,IACdK,IAAAA,SACAG,IAAAA,aACAT,IAAAA,OACAkB,IAAAA,iBACAF,IAAAA,aAGMqF,ELKqB,SAC/BxG,EACAwB,OAEM2B,EAAWtI,EAAYmF,GACvByG,EAAU7L,UAAa,GAKvB4L,EAA0B5L,eAAkB,WAC3C6L,EAAQzL,eAIXwG,EAAUxG,QAAQ6E,YAAlB2B,EAAUxG,QAAQ6E,aAClB4G,EAAQzL,SAAU,UAJlBwG,EAAUxG,QAAQ0E,WAAlB8B,EAAUxG,QAAQ0E,YAClB+G,EAAQzL,SAAU,KAKnB,CAACgF,EAAQmD,WAEZvI,aAAgB,YACTuI,GAAYnD,QACfwB,EAAUxG,QAAQyE,aAAlB+B,EAAUxG,QAAQyE,eACRO,GAAUmD,UACpB3B,EAAUxG,QAAQ4E,cAAlB4B,EAAUxG,QAAQ4E,kBAEnB,CAACI,EAAQmD,IAEL,CAAEqD,wBAAAA,GKjC6BE,GAXlC1G,SACAwB,WAUMgF,wBACFG,EAAW1G,EAAaA,EAAW,GAAKA,EAAWG,GAAe,EAClEwG,EAAgB3G,EAAaA,EAAW,GAAK,KAE7C3B,EACc,OAAlBsI,SACWA,SAAoBvO,MAC3BA,SAGJuC,gBAACiM,SAAOC,qBACFtG,GACJzF,IAAKgM,YAAU,CAACtG,EAAU1F,IAC1BwL,yCAA0CA,EAC1C3M,WACK+D,EAAOe,UACP9E,EACY,gBAAXuG,GAA4B,CAAE7B,OAAAA,GACnB,mBAAX6B,GAA+B,CAAE6G,UAAW1I,IAChDiD,EAAAA,IAEF0F,SAAS9F,GAAuB,CAAEI,EAAGX,GACrCkC,QAAS,CAAEvB,EAAGoF,EAAUpD,WAAYlC,GACpC6F,KAAM,CAAE3F,EAAGX,EAAc2C,WAAYlC,GACrC8F,oBAAqBX,IAEpBzG,MC5CHqH,EAAexM,cACnB,WAA4DG,OAAzDgF,IAAAA,SAAUnG,IAAAA,MAAO0G,IAAAA,gBAAaiG,UAAAA,aAAY,KAAO/F,wDAC5B/E,IAChB4L,EAAa/G,OAAc9E,IADzBkK,iBAIN9K,gBAACiM,SAAOC,qBACFtG,GACJzF,IAAKA,EACLwL,uCAAwCA,EACxC3M,WAAY+D,EAAO2B,QAAY1F,IAC3ByN,GAEHtH,MCbHuH,EAAc1M,cAClB,WAA4CG,OAAzCgF,IAAAA,SAAUnG,IAAAA,MAAO0G,IAAAA,YAAgBE,4CACO/E,IAAjCiF,IAAAA,kBACF2G,EAAa/G,OAAc9E,IADNkK,UAGrB6B,EAAsBC,eAC1B9G,GACA,SAAA+G,mCAA+BA,YAG3BC,EAAsBF,eAC1B9G,GACA,SAAA+G,qCAAiC,EAAIA,mBAIrC7M,gBAACiM,SAAOC,qBACFtG,GACJzF,IAAKA,EACLnB,WAAY+D,EAAOqB,cAAkBpF,IACjCyN,GAEHtH,GACCnF,uBAAK2L,UAAU,2BAA2B3M,MAAO+D,EAAOsB,QACtDrE,gBAACiM,SAAOc,MACNpB,UAAU,mCACV3M,WAAY+D,EAAOyB,WAAWoE,UAAW+D,MAE3C3M,gBAACiM,SAAOc,MACNpB,UAAU,mCACV3M,WAAY+D,EAAOyB,WAAWoE,UAAWkE,WC/BjDE,EAAc,SAACC,WAAiBA,EAAMC,WAAaD,EAAME,OAEzDC,EAAgBpN,cACpB,WAA0CG,WAAvCnB,MAAAA,aAAQ,SAAI2M,UAAAA,aAAY,KAAO/F,6BAC1ByH,EAAOL,EAAYpH,GAAQqG,SAAOqB,OAASrB,SAAOC,IAClD3I,EAAgByJ,EAAYpH,GAAQ,OAAS,cAGjD5F,gBAACqN,mBACKzH,GACJzF,IAAKA,EACLwL,wCAAyCA,EACzC3M,WAAY+D,EAAOS,SAAaxE,GAAOuE,cAAAA,IACvC8I,QAAS,CAAEnN,QAAS,GACpBgJ,QAAS,CAAEhJ,QAAS,GACpBoN,KAAM,CAAEpN,QAAS,SCNnBqO,EAAsB3I,EAC5B2I,EAAeC,UAAY9B,EAC3B6B,EAAeE,OAASf,EACxBa,EAAeG,QAAUlB,EACzBe,EAAeI,SAAWP"}